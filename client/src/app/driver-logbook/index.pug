login-toolbar(title='permission.title')

.sd-page-container
	side-bar
	.sd-page-content-wrapper
		.sd-page-content.logbook(ng-class="{'toggleMenu-sd-content': isCollapsed}")

			.title-bar
				.title Bitácora
			hr

			form(name='driverTimeSheet').add-form
				.element
					md-autocomplete(md-no-cache='false',
					md-items="item in staffSearch(lbSearch.staff) | orderBy:'resource.displayName'",
					md-selected-item='lbRow.staff',
					md-search-text-change='staffSearchTextChange(lbSearch.staff)',
					md-search-text='lbSearch.staff',
					md-selected-item-change='staffSelectedItemChange(item)',
					md-item-text='item.resource.displayName',
					md-min-length='0',
					md-floating-label='Personal')
						md-item-template
							span(md-highlight-text='lbSearch.staff', md-highlight-flags='^i') {{item.resource.name.last+', '+item.resource.name.first}}

				.element
					md-autocomplete(md-no-cache='false',
					md-items='item in opsSearch(lbSearch.operation)',
					md-selected-item='lbRow.operation',
					md-search-text-change='opsSearchTextChange(lbSearch.operation)',
					md-search-text='lbSearch.operation',
					md-selected-item-change='opsSelectedItemChange(item)',
					md-item-text='item.name',
					md-min-length='0',
					md-floating-label='Servicio')
						md-item-template
							span(md-highlight-text='lbSearch.operation', md-highlight-flags='^i') {{item.name}}

				.element
					md-input-container.jnx-datetime-picker
						label Inicio
						input(mdc-datetime-picker=''
						date='true'
						time='true'
						show-todays-date=''
						minutes='true'
						format='YYYY-MM-DD HH:mm'
						edit-input='true'
						click-outside-to-close='true'
						show-icon='true'
						ng-model='lbRow.start' type='text' required='')
				.element
					md-input-container.jnx-datetime-picker
						label Termino
						input(mdc-datetime-picker=''
						date='true'
						time='true'
						show-todays-date=''
						minutes='true'
						format='YYYY-MM-DD HH:mm'
						edit-input='true'
						click-outside-to-close='true'
						show-icon='true'
						ng-model='lbRow.end' type='text')

				//.element
				//	md-autocomplete(md-no-cache='false',
				//	md-items='item in providerSearch(lbSearch.provider)',
				//	md-selected-item='lbRow.provider',
				//	md-search-text-change='providerSearchTextChange(lbSearch.provider)',
				//	md-search-text='lbSearch.provider',
				//	md-selected-item-change='providerSelectedItemChange(item)',
				//	md-item-text='item.name',
				//	md-min-length='0',
				//	md-floating-label='Proveedor',
				//	style='width:50px')
				//		md-item-template
				//			span(md-highlight-text='lbSearch.provider', md-highlight-flags='^i') {{item.name}}

				.element
					md-input-container
						label Ubicación
						input(ng-model='lbRow.location')

				.element
					md-input-container
						label Falta
						md-select(ng-model='lbRow.absence')
							md-option(value='')
							md-option(value='D') Descanso (D)
							md-option(value='V') Vacaciones (V)
							md-option(value='PS') No se encuentra principal (PS)
							md-option(value='F') Falta (F)
							md-option(value='PC') PC
							md-option(value='I') I

				.save
					button.btn.btn-success(ng-click='addRow()')
						span.glyphicon.glyphicon-floppy-disk

			.driver-time-sheet.ag-fresh(ag-grid="gridOptions")