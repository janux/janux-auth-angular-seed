login-toolbar(title='operations.title')

side-bar

.page-content-wrapper.time-sheet(ng-class="{'page-content-left' : noneStyle}")
	.container-fluid
		.row
			.col-lg-12

				.title-bar
					.title {{ 'operations.driversTimeLog.title' | translate }}
					.options
						span {{ 'operations.driversTimeLog.filterLabel' | translate }}
					.options
						md-select(aria-label='option' ng-model='periodFilterKey' ng-change='periodChange()')
							md-option(ng-value='option.key', ng-repeat='option in periodFilterOptions') {{ option.label | translate }}

				hr

				form(name='driverTimeSheet').add-form
					.element
						md-autocomplete(md-no-cache='false',
						md-items="item in staffSearch(lbSearch.staff) | orderBy:'resource.name.last'",
						md-selected-item='lbRow.staff',
						md-search-text-change='staffSearchTextChange(lbSearch.staff)',
						md-search-text='lbSearch.staff',
						md-selected-item-change='staffSelectedItemChange(item)',
						md-item-text='item.resource.name.last+" "+item.resource.name.first',
						md-min-length='0',
						md-floating-label="{{ 'operations.driversTimeLog.staff' | translate }}")
							md-item-template
								span(md-highlight-text='lbSearch.staff', md-highlight-flags='^i') {{item.resource.name.last+', '+item.resource.name.first}}

					.element
						md-autocomplete(md-no-cache='false',
						md-items='item in opsSearch(lbSearch.operation)',
						md-selected-item='lbRow.operation',
						md-search-text-change='opsSearchTextChange(lbSearch.operation)',
						md-search-text='lbSearch.operation',
						md-selected-item-change='opsSelectedItemChange(item)',
						md-item-text='item.name',
						md-min-length='0',
						md-floating-label="{{ 'operations.driversTimeLog.operation' | translate }}")
							md-item-template
								span(md-highlight-text='lbSearch.operation', md-highlight-flags='^i') {{item.name}}

					.element
						md-input-container.jnx-datetime-picker
							label {{ 'operations.driversTimeLog.begin' | translate }}
							input(mdc-datetime-picker=''
							date='true'
							time='true'
							show-todays-date=''
							minutes='true'
							format='YYYY-MM-DD HH:mm'
							edit-input='true'
							click-outside-to-close='true'
							show-icon='true'
							ng-model='lbRow.start'
							ng-model-options="{ debounce: 1000 }"
							type='text' required='')

					.element
						md-input-container.jnx-datetime-picker
							label {{ 'operations.driversTimeLog.end' | translate }}
							input(mdc-datetime-picker=''
							date='true'
							time='true'
							show-todays-date=''
							minutes='true'
							format='YYYY-MM-DD HH:mm'
							edit-input='true'
							click-outside-to-close='true'
							show-icon='true'
							ng-model='lbRow.end'
							ng-model-options="{ debounce: 1000 }"
							type='text')

					//.element
					//	md-autocomplete(md-no-cache='false',
					//	md-items='item in providerSearch(lbSearch.provider)',
					//	md-selected-item='lbRow.provider',
					//	md-search-text-change='providerSearchTextChange(lbSearch.provider)',
					//	md-search-text='lbSearch.provider',
					//	md-selected-item-change='providerSelectedItemChange(item)',
					//	md-item-text='item.name',
					//	md-min-length='0',
					//	md-floating-label='Proveedor',
					//	style='width:50px')
					//		md-item-template
					//			span(md-highlight-text='lbSearch.provider', md-highlight-flags='^i') {{item.name}}

					.element
						md-input-container
							label {{ 'operations.driversTimeLog.location' | translate }}
							input(ng-model='lbRow.location')

					.element
						md-input-container
							label {{ 'operations.driversTimeLog.absence' | translate }}
							md-select(ng-model='lbRow.absence')
								md-option(value='')
								md-option(value='D') {{ 'operations.driversTimeLog.absenceOptions.D' | translate }}
								md-option(value='V') {{ 'operations.driversTimeLog.absenceOptions.V' | translate }}
								md-option(value='PS') {{ 'operations.driversTimeLog.absenceOptions.PS' | translate }}
								md-option(value='F') {{ 'operations.driversTimeLog.absenceOptions.F' | translate }}
								md-option(value='PC') {{ 'operations.driversTimeLog.absenceOptions.PC' | translate }}
								md-option(value='I') {{ 'operations.driversTimeLog.absenceOptions.I' | translate }}

					.save
						button.btn.btn-success(ng-click='addRow()')
							span.glyphicon.glyphicon-floppy-disk

					.save
						button.btn.btn-success(ng-click='export()')
							span.glyphicon.glyphicon-export

				.driver-time-sheet.ag-fresh(ag-grid="gridOptions")
footer-Janux